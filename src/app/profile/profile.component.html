<div class="profile-container">
  <div class="header">
    <h1>Profile Settings</h1>
    <p>Manage your personal information and fitness preferences</p>
  </div>

  <div class="profile-form">
    <!-- Personal Information Accordion -->
    <div class="accordion-section">
      <div class="accordion-header" (click)="toggleSection('personal')">
        <h3>Personal Information</h3>
        <span class="accordion-icon">{{ isExpanded('personal') ? 'â–¼' : 'â–¶' }}</span>
      </div>
      @if (isExpanded('personal')) {
        <div class="accordion-content">
          <div class="form-row">
            <div class="form-group">
              <label for="firstname">First Name</label>
              <input 
                id="firstname"
                type="text" 
                [(ngModel)]="profile().firstname"
                placeholder="Enter your first name">
            </div>
            <div class="form-group">
              <label for="lastname">Last Name</label>
              <input 
                id="lastname"
                type="text" 
                [(ngModel)]="profile().lastname"
                placeholder="Enter your last name">
            </div>
          </div>
          <div class="form-group">
            <label for="email">Email</label>
            <input 
              id="email"
              type="email" 
              [(ngModel)]="profile().email"
              placeholder="Enter your email">
          </div>
        </div>
      }
    </div>

    <!-- Physical Information Accordion -->
    <div class="accordion-section">
      <div class="accordion-header" (click)="toggleSection('physical')">
        <h3>Physical Information</h3>
        <span class="accordion-icon">{{ isExpanded('physical') ? 'â–¼' : 'â–¶' }}</span>
      </div>
      @if (isExpanded('physical')) {
        <div class="accordion-content">
          <div class="form-row">
            <div class="form-group">
              <label for="weight">Weight (kg)</label>
              <input 
                id="weight"
                type="number" 
                [(ngModel)]="profile().weight"
                placeholder="Enter your weight"
                min="0"
                step="0.1">
            </div>
            <div class="form-group">
              <label for="height">Height (cm)</label>
              <input 
                id="height"
                type="number" 
                [(ngModel)]="profile().height"
                placeholder="Enter your height"
                min="0"
                step="0.1">
            </div>
          </div>
          <div class="form-row">
            <div class="form-group">
              <label for="age">Age</label>
              <input 
                id="age"
                type="number" 
                [(ngModel)]="profile().age"
                placeholder="Enter your age"
                min="0"
                max="150">
            </div>
            <div class="form-group">
              <label for="gender">Gender</label>
              <select id="gender" [(ngModel)]="profile().gender">
                <option value="">Select gender</option>
                <option value="male">Male</option>
                <option value="female">Female</option>
                <option value="other">Other</option>
              </select>
            </div>
          </div>
          @if (bmi()) {
            <div class="bmi-display">
              <h4>BMI Information</h4>
              <div class="bmi-info">
                <span class="bmi-value">BMI: {{ bmi() }}</span>
                <span class="bmi-category">{{ bmiCategory() }}</span>
              </div>
            </div>
          }
        </div>
      }
    </div>

    <!-- Fitness Information Accordion -->
    <div class="accordion-section">
      <div class="accordion-header" (click)="toggleSection('fitness')">
        <h3>Fitness Information</h3>
        <span class="accordion-icon">{{ isExpanded('fitness') ? 'â–¼' : 'â–¶' }}</span>
      </div>
      @if (isExpanded('fitness')) {
        <div class="accordion-content">
          <div class="form-group">
            <label for="fitnessLevel">Fitness Level</label>
            <select id="fitnessLevel" [(ngModel)]="profile().fitnessLevel">
              <option value="">Select fitness level</option>
              <option value="beginner">Beginner</option>
              <option value="intermediate">Intermediate</option>
              <option value="advanced">Advanced</option>
            </select>
          </div>
          <div class="form-group">
            <label>Fitness Goals</label>
            <div class="goals-container">
              @for (goal of profile().goals; track $index) {
                <div class="goal-item">
                  <input 
                    type="text" 
                    [ngModel]="goal"
                    (ngModelChange)="updateGoal($index, $event)"
                    placeholder="Enter a fitness goal">
                  <button 
                    type="button" 
                    class="remove-goal-btn"
                    (click)="removeGoal($index)">Ã—</button>
                </div>
              }
              <button 
                type="button" 
                class="add-goal-btn"
                (click)="addGoal()">+ Add Goal</button>
            </div>
          </div>
        </div>
      }
    </div>

    <!-- Essential Goals Accordion -->
    <div class="accordion-section">
      <div class="accordion-header" (click)="toggleSection('essentials')">
        <h3>Essential Goals</h3>
        <span class="accordion-icon">{{ isExpanded('essentials') ? 'â–¼' : 'â–¶' }}</span>
      </div>
      @if (isExpanded('essentials')) {
        <div class="accordion-content">
          <!-- Core Daily Goals -->
          <div class="goals-section">
            <h4>Daily Goals</h4>
            <div class="form-row">
              <div class="form-group">
                <label for="waterGoal">ğŸ’§ Water Goal (liters)</label>
                <input 
                  id="waterGoal"
                  type="number" 
                  [(ngModel)]="profile().waterGoal"
                  placeholder="Enter daily water goal"
                  min="0"
                  step="0.1">
              </div>
              <div class="form-group">
                <label for="stepsGoal">ğŸš¶ Steps Goal</label>
                <input 
                  id="stepsGoal"
                  type="number" 
                  [(ngModel)]="profile().stepsGoal"
                  placeholder="Enter daily steps goal"
                  min="0"
                  step="100">
              </div>
            </div>
            <div class="form-row">
              <div class="form-group">
                <label for="calorieGoal">ğŸ”¥ Calories Goal</label>
                <input 
                  id="calorieGoal"
                  type="number" 
                  [(ngModel)]="profile().calorieGoal"
                  placeholder="Enter daily calorie goal"
                  min="0"
                  step="50">
              </div>
              <div class="form-group">
                <label for="sleepGoal">ğŸ˜´ Sleep Goal (hours)</label>
                <input 
                  id="sleepGoal"
                  type="number" 
                  [(ngModel)]="profile().sleepGoal"
                  placeholder="Enter daily sleep goal"
                  min="0"
                  max="24"
                  step="0.5">
              </div>
            </div>
          </div>

          <!-- Body Goals -->
          <div class="goals-section">
            <h4>Body Goals</h4>
            <div class="form-row">
              <div class="form-group">
                <label for="weightGoal">âš–ï¸ Target Weight (kg)</label>
                <input 
                  id="weightGoal"
                  type="number" 
                  [(ngModel)]="profile().weightGoal"
                  placeholder="Enter target weight"
                  min="0"
                  step="0.1">
              </div>
              <div class="form-group">
                <label for="bodyFatGoal">ğŸ“Š Body Fat Goal (%)</label>
                <input 
                  id="bodyFatGoal"
                  type="number" 
                  [(ngModel)]="profile().bodyFatGoal"
                  placeholder="Enter body fat goal"
                  min="0"
                  max="100"
                  step="0.1">
              </div>
            </div>
            <div class="form-row">
              <div class="form-group">
                <label for="muscleMassGoal">ğŸ’ª Muscle Mass Goal (kg)</label>
                <input 
                  id="muscleMassGoal"
                  type="number" 
                  [(ngModel)]="profile().muscleMassGoal"
                  placeholder="Enter muscle mass goal"
                  min="0"
                  step="0.1">
              </div>
              <div class="form-group">
                <label for="waistGoal">ğŸ“ Waist Goal (cm)</label>
                <input 
                  id="waistGoal"
                  type="number" 
                  [(ngModel)]="profile().waistGoal"
                  placeholder="Enter waist goal"
                  min="0"
                  step="0.1">
              </div>
            </div>
          </div>

          <!-- Lifestyle Goals -->
          <div class="goals-section">
            <h4>Lifestyle Goals</h4>
            <div class="form-row">
              <div class="form-group">
                <label for="meditationGoal">ğŸ§˜ Meditation Goal (min)</label>
                <input 
                  id="meditationGoal"
                  type="number" 
                  [(ngModel)]="profile().meditationGoal"
                  placeholder="Enter daily meditation goal"
                  min="0"
                  step="5">
              </div>
              <div class="form-group">
                <label for="readingGoal">ğŸ“š Reading Goal (min)</label>
                <input 
                  id="readingGoal"
                  type="number" 
                  [(ngModel)]="profile().readingGoal"
                  placeholder="Enter daily reading goal"
                  min="0"
                  step="5">
              </div>
            </div>
            <div class="form-row">
              <div class="form-group">
                <label for="screenTimeGoal">ğŸ“± Screen Time Limit (hrs)</label>
                <input 
                  id="screenTimeGoal"
                  type="number" 
                  [(ngModel)]="profile().screenTimeGoal"
                  placeholder="Enter max screen time"
                  min="0"
                  step="0.5">
              </div>
            </div>
          </div>
        </div>
      }
    </div>

    <!-- Tracking Preferences Accordion -->
    <div class="accordion-section">
      <div class="accordion-header" (click)="toggleSection('tracking')">
        <h3>Tracking Preferences</h3>
        <span class="accordion-icon">{{ isExpanded('tracking') ? 'â–¼' : 'â–¶' }}</span>
      </div>
      @if (isExpanded('tracking')) {
        <div class="accordion-content">
          <div class="tracking-section">
            <h4>Choose what you want to track daily</h4>
            <p class="tracking-description">Enable only the metrics you want to track. Disabled items won't appear in your daily logging.</p>
            
            <div class="tracking-grid">
              <div class="tracking-item">
                <label class="tracking-checkbox">
                  <input type="checkbox" 
                         [checked]="getTrackingPreference('waterIntake')"
                         (change)="updateTrackingPreference('waterIntake', $event.target.checked)">
                  <span class="tracking-label">
                    <span class="tracking-icon">ğŸ’§</span>
                    <span class="tracking-text">Water Intake</span>
                  </span>
                </label>
              </div>
              
              <div class="tracking-item">
                <label class="tracking-checkbox">
                  <input type="checkbox" 
                         [checked]="getTrackingPreference('steps')"
                         (change)="updateTrackingPreference('steps', $event.target.checked)">
                  <span class="tracking-label">
                    <span class="tracking-icon">ğŸš¶</span>
                    <span class="tracking-text">Steps</span>
                  </span>
                </label>
              </div>
              
              <div class="tracking-item">
                <label class="tracking-checkbox">
                  <input type="checkbox" 
                         [checked]="getTrackingPreference('calories')"
                         (change)="updateTrackingPreference('calories', $event.target.checked)">
                  <span class="tracking-label">
                    <span class="tracking-icon">ğŸ”¥</span>
                    <span class="tracking-text">Calories</span>
                  </span>
                </label>
              </div>
              
              <div class="tracking-item">
                <label class="tracking-checkbox">
                  <input type="checkbox" 
                         [checked]="getTrackingPreference('sleep')"
                         (change)="updateTrackingPreference('sleep', $event.target.checked)">
                  <span class="tracking-label">
                    <span class="tracking-icon">ğŸ˜´</span>
                    <span class="tracking-text">Sleep</span>
                  </span>
                </label>
              </div>
              
              <div class="tracking-item">
                <label class="tracking-checkbox">
                  <input type="checkbox" 
                         [checked]="getTrackingPreference('weight')"
                         (change)="updateTrackingPreference('weight', $event.target.checked)">
                  <span class="tracking-label">
                    <span class="tracking-icon">âš–ï¸</span>
                    <span class="tracking-text">Weight</span>
                  </span>
                </label>
              </div>
              
              <div class="tracking-item">
                <label class="tracking-checkbox">
                  <input type="checkbox" 
                         [checked]="getTrackingPreference('mood')"
                         (change)="updateTrackingPreference('mood', $event.target.checked)">
                  <span class="tracking-label">
                    <span class="tracking-icon">ğŸ˜Š</span>
                    <span class="tracking-text">Mood & Energy</span>
                  </span>
                </label>
              </div>
              
              <div class="tracking-item">
                <label class="tracking-checkbox">
                  <input type="checkbox" 
                         [checked]="getTrackingPreference('bodyMeasurements')"
                         (change)="updateTrackingPreference('bodyMeasurements', $event.target.checked)">
                  <span class="tracking-label">
                    <span class="tracking-icon">ğŸ“</span>
                    <span class="tracking-text">Body Measurements</span>
                  </span>
                </label>
              </div>
              
              <div class="tracking-item">
                <label class="tracking-checkbox">
                  <input type="checkbox" 
                         [checked]="getTrackingPreference('supplements')"
                         (change)="updateTrackingPreference('supplements', $event.target.checked)">
                  <span class="tracking-label">
                    <span class="tracking-icon">ğŸ’Š</span>
                    <span class="tracking-text">Supplements</span>
                  </span>
                </label>
              </div>
              
              <div class="tracking-item">
                <label class="tracking-checkbox">
                  <input type="checkbox" 
                         [checked]="getTrackingPreference('habits')"
                         (change)="updateTrackingPreference('habits', $event.target.checked)">
                  <span class="tracking-label">
                    <span class="tracking-icon">ğŸ¯</span>
                    <span class="tracking-text">Habits</span>
                  </span>
                </label>
              </div>
            </div>
          </div>
        </div>
      }
    </div>
  </div>

  <div class="save-actions">
    <button 
      (click)="saveProfile()" 
      [disabled]="isSaving()"
      class="save-btn">
      @if (isSaving()) {
        <span class="loading">ğŸ’¾ Saving...</span>
      } @else {
        <span>Save Profile</span>
      }
    </button>
  </div>
</div>
